<view class="tab-bar">
  <view class="tab-item {{tabIndex==0?'active':''}}" data-index="0" bindtap="switchTab">
    <text class="icon">📄</text>
    <text>战绩记录</text>
  </view>
  <view class="tab-item {{tabIndex==1?'active':''}}" data-index="1" bindtap="switchTab">
    <text class="icon">⏳</text>
    <text>待确认战绩</text>
  </view>
</view>
<view wx:if="{{tabIndex==0}}">
  <view class="mode-switch">
    <view class="mode-item {{modeIndex==0?'active':''}}" data-index="0" bindtap="switchMode">单打</view>
    <view class="mode-item {{modeIndex==1?'active':''}}" data-index="1" bindtap="switchMode">双打</view>
  </view>
  <view>
    <block wx:for="{{records}}" wx:key="index">
      <view data-index="{{index}}" bindtap="viewRecord">
        <record-card record="{{item}}" doubles="{{doubles}}" />
      </view>
    </block>
  </view>
</view>
<view wx:elif="{{tabIndex==1}}">
  <view class="mode-switch">
    <view class="mode-item {{pendingTabIndex==0?'active':''}}" data-index="0" bindtap="switchPendingMode">单打</view>
    <view class="mode-item {{pendingTabIndex==1?'active':''}}" data-index="1" bindtap="switchPendingMode">双打</view>
  </view>
  <view wx:if="{{pendingTabIndex==0}}">
    <block wx:for="{{pendingSingles}}" wx:key="index">
      <record-card record="{{item}}" doubles="{{false}}" showActions="{{true}}">
        <view slot="actions" class="action-bar">
          <text class="status-text">{{item.status}}</text>
          <view class="button-group">
            <button wx:if="{{item.canConfirm}}" class="action-btn confirm" bindtap="confirmSingle" data-index="{{index}}">确认</button>
            <button wx:if="{{item.canReject}}" class="action-btn reject" bindtap="rejectSingle" data-index="{{index}}">拒绝</button>
            <button wx:if="{{item.canApprove}}" class="action-btn approve" bindtap="approveSingle" data-index="{{index}}">通过</button>
            <button wx:if="{{item.canVeto}}" class="action-btn veto" bindtap="vetoSingle" data-index="{{index}}">否决</button>
            <button class="action-btn share" open-type="share" data-index="{{index}}" data-type="single">分享</button>
          </view>
        </view>
      </record-card>
    </block>
  </view>
  <view wx:elif="{{pendingTabIndex==1}}">
    <block wx:for="{{pendingDoubles}}" wx:key="index">
      <record-card record="{{item}}" doubles="{{true}}" showActions="{{true}}">
        <view slot="actions" class="action-bar">
          <text class="status-text">{{item.status}}</text>
          <view class="button-group">
            <button wx:if="{{item.canConfirm}}" class="action-btn confirm" bindtap="confirmDouble" data-index="{{index}}">确认</button>
            <button wx:if="{{item.canReject}}" class="action-btn reject" bindtap="rejectDouble" data-index="{{index}}">拒绝</button>
            <button wx:if="{{item.canApprove}}" class="action-btn approve" bindtap="approveDouble" data-index="{{index}}">通过</button>
            <button wx:if="{{item.canVeto}}" class="action-btn veto" bindtap="vetoDouble" data-index="{{index}}">否决</button>
            <button class="action-btn share" open-type="share" data-index="{{index}}" data-type="double">分享</button>
          </view>
        </view>
      </record-card>
    </block>
  </view>
</view>
<button class="fab" bindtap="addMatch">＋</button>
