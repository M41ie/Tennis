<view class="page-container">
  <view class="section-title-row">
    <view class="section-title">以下是符合搜索的俱乐部</view>
  </view>
  <view class="club-list">
    <block wx:for="{{clubs}}" wx:key="club_id">
      <view class="club-card">
        <view class="card-left">
          <view class="club-header">
            <view class="club-name">{{item.name}}</view>
          </view>
          <view class="club-slogan" wx:if="{{item.slogan}}">{{item.slogan}}</view>
          <view class="club-stats" wx:if="{{item.member_count}}">
            <text>{{item.region}} · 成员 {{item.member_count}} 人</text>
            <text>单打：{{item.singles_range}}，平均 {{item.singles_avg}}，共计 {{item.total_singles}} 场</text>
            <text>双打：{{item.doubles_range}}，平均 {{item.doubles_avg}}，共计 {{item.total_doubles}} 场</text>
          </view>
        </view>
        <view class="card-right">
          <button wx:if="{{!item.joined && !item.pending && !item.rejected_reason}}" class="join-btn" data-id="{{item.club_id}}" bindtap="join">申请加入</button>
          <button wx:elif="{{item.pending}}" class="join-btn pending" disabled>审核中</button>
          <button wx:elif="{{item.rejected_reason}}" class="join-btn pending" data-id="{{item.club_id}}" data-reason="{{item.rejected_reason}}" bindtap="viewReject">查看未通过原因</button>
          <button wx:else class="join-btn disabled" disabled>已加入</button>
        </view>
      </view>
    </block>
  </view>
  <view wx:if="{{showDialog}}" class="dialog-mask" bindtap="cancelJoin">
    <view class="dialog-card" catchtap="noop">
      <input class="dialog-input" placeholder="申请理由" bindinput="onReason" />
      <input
        wx:if="{{needRating}}"
        class="dialog-input"
        placeholder="单打自评"
        type="number"
        bindinput="onSingles"
      />
      <input
        wx:if="{{needRating}}"
        class="dialog-input"
        placeholder="双打自评"
        type="number"
        bindinput="onDoubles"
      />
      <view class="dialog-actions">
        <button bindtap="submitJoin">提交</button>
        <button bindtap="cancelJoin">取消</button>
      </view>
    </view>
  </view>
</view>
