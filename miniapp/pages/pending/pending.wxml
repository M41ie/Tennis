<view class="tab-bar">
  <view class="tab-item {{tabIndex==0?'active':''}}" data-index="0" bindtap="switchTab">单打</view>
  <view class="tab-item {{tabIndex==1?'active':''}}" data-index="1" bindtap="switchTab">双打</view>
</view>

<view wx:if="{{tabIndex == 0}}" class="list">
  <block wx:for="{{singles}}" wx:key="index">
    <view class="pending-card-wrapper">
      <view class="pending-card">
        <view class="card-left score-section">
          {{item.score_a}}-{{item.score_b}}
        </view>
        <view class="card-right info-section">
          <!-- Singles Player Info -->
          <block wx:if="{{tabIndex == 0}}">
            <view class="player-line">{{item.player_a_name}} ({{item.rating_a_before}})</view>
            <view class="vs-text">vs</view>
            <view class="player-line">{{item.player_b_name}} ({{item.rating_b_before}})</view>
          </block>
        </view>
      </view>
      <view class="status-actions-container">
        <view class="status">{{item.statusText}}</view>
        <view class="actions">
          <!-- Singles Actions -->
          <block wx:if="{{tabIndex == 0}}">
            <button wx:if="{{item.showConfirmButton}}" data-index="{{item.index}}" bindtap="confirmSingle">确认</button>
            <button wx:if="{{item.showDeclineButton}}" data-index="{{item.index}}" bindtap="rejectSingle">拒绝</button>
            <button wx:if="{{item.showApproveButton}}" data-index="{{item.index}}" bindtap="approveSingle">通过</button>
            <button wx:if="{{item.showVetoButton}}" data-index="{{item.index}}" bindtap="vetoSingle">否决</button>
            <button data-match-info="{{item.originalData}}" bindtap="shareMatch">分享</button>
          </block>
        </view>
      </view>
    </view>
  </block>
</view>

<view wx:elif="{{tabIndex == 1}}" class="list">
  <block wx:for="{{doubles}}" wx:key="index">
    <view class="pending-card-wrapper">
      <view class="pending-card">
        <view class="card-left score-section">
          {{item.score_a}}-{{item.score_b}}
        </view>
        <view class="card-right info-section">
          <!-- Doubles Player Info -->
          <block wx:if="{{tabIndex == 1}}">
            <view class="team-line">
              <view>{{item.a1_name}} ({{item.rating_a1_before}})</view>
              <view>{{item.a2_name}} ({{item.rating_a2_before}})</view>
            </view>
            <view class="vs-text">vs</view>
            <view class="team-line">
              <view>{{item.b1_name}} ({{item.rating_b1_before}})</view>
              <view>{{item.b2_name}} ({{item.rating_b2_before}})</view>
            </view>
          </block>
        </view>
      </view>
      <view class="status-actions-container">
        <view class="status">{{item.statusText}}</view>
        <view class="actions">
          <!-- Doubles Actions -->
          <block wx:if="{{tabIndex == 1}}">
            <button wx:if="{{item.showConfirmButton}}" data-index="{{item.index}}" bindtap="confirmDouble">确认</button>
            <button wx:if="{{item.showDeclineButton}}" data-index="{{item.index}}" bindtap="rejectDouble">拒绝</button>
            <button wx:if="{{item.showApproveButton}}" data-index="{{item.index}}" bindtap="approveDouble">通过</button>
            <button wx:if="{{item.showVetoButton}}" data-index="{{item.index}}" bindtap="vetoDouble">否决</button>
            <button data-match-info="{{item.originalData}}" bindtap="shareMatch">分享</button>
          </block>
        </view>
      </view>
    </view>
  </block>
</view>
